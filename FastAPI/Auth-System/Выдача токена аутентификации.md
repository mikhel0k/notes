#токен_аутентификации #JWT_токен #авторизация #регистрация
Для начала работы с токенами ознакомьтесь с [[Работа с JWT токеном]]

Для того чтобы записать токен в cookie надо в функции ручки получить объект Responce
```
@router.post("/login")  
async def login(  
        response: Response, 
        )
```
Сформировать словарь который мы хотим записать в cookie и превратить его в токен при помощи заранее сделанный функций 
```
access_token = create_access_token(data={  
        "sub": str(user.id),  
        "username": user.username,  
        "is_reader": user.is_reader,  
        "is_author": user.is_author,  
        "is_admin": user.is_admin,  
    })
```

Ну и после этого установить токен задав правильно все параметры
```
response.set_cookie(  
	    key="access_token",  
	    value=access_token,  
	    httponly=True,  
	    secure=True,  
	    samesite="lax",  
	    max_age=settings.ACCESS_TOKEN_EXPIRE_MINUTES * 60,  
	    path="/"  
)
```